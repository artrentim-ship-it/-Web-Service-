from flask import Flask, request, jsonify
from flask_cors import CORS
import google.generativeai as genai
import os

app = Flask(__name__)
CORS(app)

# Configurar a chave da API
genai.configure(api_key=os.getenv("GOOGLE_GENAI_API_KEY"))

# Inicializar o modelo
model = genai.GenerativeModel("gemini-pro")

@app.route("/")
def home():
    return "API Gemini está rodando!"

@app.route("/gerar", methods=["POST"])
def gerar_texto():
    dados = request.get_json()
    prompt = dados.get("prompt", "")

    if not prompt:
        return jsonify({"erro": "Prompt não fornecido"}), 400

    try:
        resposta = model.generate_content(prompt)
        return jsonify({"resposta": resposta.text})
    except Exception as e:
        return jsonify({"erro": str(e)}), 500
``